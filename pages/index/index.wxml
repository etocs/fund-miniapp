<!--pages/index/index.wxml-->
<view class="container">
  <!-- å¤´éƒ¨æ“ä½œæ  -->
  <view class="header">
    <view class="header-actions">
      <button class="action-btn" bindtap="goToSearch">
        <text class="icon">ğŸ”</text>
        <text>æœç´¢</text>
      </button>
      <button class="action-btn" bindtap="goToRank">
        <text class="icon">ğŸ“Š</text>
        <text>æ’è¡Œ</text>
      </button>
      <button class="action-btn" bindtap="onRefresh">
        <text class="icon">ğŸ”„</text>
        <text>åˆ·æ–°</text>
      </button>
    </view>
    <view class="update-time" wx:if="{{updateTime}}">
      æ›´æ–°æ—¶é—´: {{updateTime}}
    </view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading-container" wx:if="{{loading}}">
    <loading>åŠ è½½ä¸­...</loading>
  </view>

  <!-- åŸºé‡‘åˆ—è¡¨ -->
  <view class="fund-list" wx:elif="{{funds.length > 0}}">
    <view class="fund-item-wrapper" 
          wx:for="{{funds}}" 
          wx:key="fundcode"
          data-fundcode="{{item.fundcode}}"
          data-fund="{{item}}"
          bindtap="onFundTap">
      <!-- åŸºé‡‘ä¿¡æ¯å±•ç¤º -->
      <view class="fund-header">
        <text class="fund-code">{{item.fundcode}}</text>
        <text class="fund-name">{{item.name}}</text>
      </view>
      <view class="fund-values">
        <view class="value-item">
          <text class="label">å‡€å€¼</text>
          <text class="value">{{item.dwjz || '--'}}</text>
        </view>
        <view class="value-item">
          <text class="label">ä¼°å€¼</text>
          <text class="value">{{item.gsz || '--'}}</text>
        </view>
        <view class="value-item">
          <text class="label">æ¶¨è·Œ</text>
          <text class="value {{item.gszzl >= 0 ? 'profit' : 'loss'}}">{{item.gszzl || '--'}}%</text>
        </view>
      </view>
      <!-- æŒä»“ç›ˆäºï¼ˆå¦‚æœæœ‰è®¾ç½®ï¼‰ -->
      <view class="fund-holding" wx:if="{{item.shares > 0}}">
        <text class="holding-info">æŒä»“: {{item.shares}}ä»½ | æˆæœ¬: {{item.cost}}</text>
        <text class="holding-profit {{item.profit >= 0 ? 'profit' : 'loss'}}">
          ç›ˆäº: {{item.profit >= 0 ? '+' : ''}}{{item.profit}} ({{item.profitRate}}%)
        </text>
      </view>
      <view class="fund-time">ä¼°å€¼æ—¶é—´: {{item.gztime || '--'}}</view>
      <!-- åˆ é™¤æŒ‰é’® -->
      <view class="delete-btn" catchtap="onDeleteFund" data-fundcode="{{item.fundcode}}">
        <text>åˆ é™¤</text>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:else>
    <view class="empty-icon">ğŸ“‹</view>
    <view class="empty-text">è¿˜æ²¡æœ‰è‡ªé€‰åŸºé‡‘</view>
    <view class="empty-text">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ·»åŠ </view>
    <button class="btn-primary mt-20" bindtap="goToSearch">
      æ·»åŠ è‡ªé€‰åŸºé‡‘
    </button>
  </view>
</view>
